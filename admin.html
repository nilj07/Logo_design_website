<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EliteLogos Admin</title>

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body class="bg-black text-white p-6 font-sans">

  <h1 class="text-3xl font-bold mb-6">Admin - Add Logo</h1>

  <form id="addLogoForm" class="space-y-4 max-w-md">
    <input type="text" id="logoTitle" placeholder="Title" class="w-full p-2 rounded text-black" required />
    <input type="file" id="logoImage" accept="image/*" class="w-full p-2 rounded text-black" required />
    <select id="logoCategory" class="w-full p-2 rounded text-black" required>
      <option value="" disabled selected>Select Category</option>
      <option value="Corporate">Corporate</option>
      <option value="Personal">Personal</option>
      <option value="Retail">Retail</option>
    </select>
    <button type="submit" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-500">Add Logo</button>
  </form>

  <div id="status" class="mt-4 text-green-400"></div>

  <script>
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  status.textContent = "Uploading...";

  const title = document.getElementById("logoTitle").value.trim();
  const imageFile = document.getElementById("logoImage").files[0];
  const category = document.getElementById("logoCategory").value;

  if (!title || !imageFile || !category) {
    alert("All fields are required.");
    return;
  }

  try {
    const base64 = await fileToBase64(imageFile);
    const ref = db.ref("logos");
    const result = await ref.push({ title, category, image: base64 });

    console.log("Upload success:", result.key);  // ✅ Debug line
    form.reset();
    status.textContent = "✅ Logo added successfully!";
  } catch (err) {
    console.error("❌ Error adding logo:", err);  // ✅ Show full error
    status.textContent = "❌ Error adding logo: " + err.message;
  }
});

  </script>
</body>
</html>
